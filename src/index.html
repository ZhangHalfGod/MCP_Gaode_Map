<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>出行助手</title>
    <!-- 引入TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- 配置TailwindCSS -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A6FA5',
                        secondary: '#72A0C1',
                        accent: '#F18F01',
                        light: '#F5F5F5',
                        dark: '#333333'
                    },
                    fontFamily: {
                        sans: ['Noto Sans SC', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .button-hover {
                @apply transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95;
            }
            .fade-in {
                animation: fadeIn 0.5s ease-in;
            }
            .slide-up {
                animation: slideUp 0.5s ease-out;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .cardNumber {
                display: none; /* 隐藏卡片数字标识 */
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideUp {
                from { 
                    opacity: 0;
                    transform: translateY(20px);
                }
                to { 
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        }
    </style>
</head>
<body class="bg-light text-dark">
    <!-- 单一滚动容器，包含两个页面内容 -->
    <div id="singleScrollContainer" class="relative min-h-screen overflow-y-auto">
        <!-- 主页面内容 -->
        <div id="mainPage" class="relative z-10 bg-light transition-opacity duration-500">
            <!-- 页面头部 -->
            <header class="bg-primary text-white py-6 shadow-md">
                <div class="container mx-auto px-4">
                    <h1 class="text-[28px] md:text-[36px] font-bold text-center text-shadow fade-in">
                        长辈出行助手
                    </h1>
                    <p class="text-[18px] text-center mt-2 text-white/90 fade-in" style="animation-delay: 0.2s">
                        轻松规划您的出行路线
                    </p>
                </div>
            </header>

            <!-- 主要内容 -->
            <main class="flex-grow container mx-auto px-4 py-8">
        <!-- 路线信息卡片 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 slide-up" style="animation-delay: 0.3s">
            <div class="flex items-start space-x-4">
                <div class="bg-green-500 text-white rounded-full p-3 mt-1">
                    <span class="material-icons text-[24px]">place</span>
                </div>
                <div class="flex-grow">
                    <h2 class="text-[24px] font-bold mb-1">出发地点</h2>
                    <p class="text-[20px]" id="startAddress">广州市越秀区彩虹桥</p>
                </div>
            </div>
            
            <!-- 路线箭头 -->
            <div class="flex justify-center my-4">
                <span class="material-icons text-[32px] text-primary">arrow_downward</span>
            </div>
            
            <div class="flex items-start space-x-4">
                <div class="bg-red-500 text-white rounded-full p-3 mt-1">
                    <span class="material-icons text-[24px]">flag</span>
                </div>
                <div class="flex-grow">
                    <h2 class="text-[24px] font-bold mb-1">目的地</h2>
                    <p class="text-[20px]" id="endAddress">广州塔（小蛮腰）</p>
                </div>
            </div>
        </div>

        <!-- 出行方式选择 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- 打车选项 -->
            <div class="bg-primary rounded-xl shadow-lg overflow-hidden button-hover">
                <a href="" id="taxiLink" class="block p-6 h-full">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-[24px] font-bold text-white">打车</h3>
                        <span class="bg-white text-primary rounded-full p-3">
                            <span class="material-icons text-[28px]">local_taxi</span>
                        </span>
                    </div>
                    <p class="text-[16px] text-white/90 mb-4">
                        一键呼叫出租车，直接前往目的地
                    </p>
                    <div class="bg-white/20 rounded-lg p-4">
                        <p class="text-white text-[18px] font-medium">预计行程时间: <span id="taxiTime">约25分钟</span></p>
                    </div>
                </a>
            </div>

            <!-- 公交车选项 -->
            <div class="bg-secondary rounded-xl shadow-lg overflow-hidden button-hover">
                <a href="" id="busLink" class="block p-6 h-full">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-[24px] font-bold text-white">公交车</h3>
                        <span class="bg-white text-secondary rounded-full p-3">
                            <span class="material-icons text-[28px]">directions_bus</span>
                        </span>
                    </div>
                    <p class="text-[16px] text-white/90 mb-4">
                        查看公交路线，绿色环保出行
                    </p>
                    <div class="bg-white/20 rounded-lg p-4">
                        <p class="text-white text-[18px] font-medium">预计行程时间: <span id="busTime">约45分钟</span></p>
                    </div>
                </a>
            </div>

            <!-- 自驾选项 -->
            <div class="bg-green-700 rounded-xl shadow-lg overflow-hidden button-hover">
                <a href="" id="driveLink" class="block p-6 h-full">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-[24px] font-bold text-white">开车去</h3>
                        <span class="bg-white text-green-700 rounded-full p-3">
                            <span class="material-icons text-[28px]">directions_car</span>
                        </span>
                    </div>
                    <p class="text-[16px] text-white/90 mb-4">
                        自驾导航路线，途径主要道路
                    </p>
                    <div class="bg-white/20 rounded-lg p-4">
                        <p class="text-white text-[18px] font-medium">预计行程时间: <span id="driveTime">约30分钟</span></p>
                    </div>
                </a>
            </div>
        </div>
        
        <!-- 自驾路线详细信息 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 slide-up" style="animation-delay: 0.6s">
            <h2 class="text-[24px] font-bold mb-4 flex items-center">
                <span class="material-icons text-[24px] mr-2 text-green-700">directions_car</span>
                自驾路线详情
            </h2>
            <div class="space-y-4">
                <div class="flex items-start">
                    <span class="material-icons text-[20px] mr-2 text-blue-500 mt-1">route</span>
                    <p class="text-[20px]"><strong>推荐路线：</strong>中山七路 → 康王中路 → 人民路 → 沿江西路 → 艺洲路</p>
                </div>
                <div class="flex items-start">
                    <span class="material-icons text-[20px] mr-2 text-amber-500 mt-1">local_parking</span>
                    <p class="text-[20px]"><strong>停车场：</strong>广州塔地下停车场（收费标准：10元/小时）</p>
                </div>
                <div class="flex items-start">
                    <span class="material-icons text-[20px] mr-2 text-green-500 mt-1">straight</span>
                    <p class="text-[20px]"><strong>总里程：</strong>约8.5公里，预估油费约15元</p>
                </div>
                <div class="flex items-start">
                    <span class="material-icons text-[20px] mr-2 text-red-500 mt-1">warning</span>
                    <p class="text-[20px]"><strong>高峰期提示：</strong>7:30-9:00和17:30-19:00建议提前15分钟出发</p>
                </div>
            </div>
        </div>

        <!-- 实时交通信息 -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 slide-up" style="animation-delay: 0.5s">
            <h2 class="text-[24px] font-bold mb-4 flex items-center">
                <span class="material-icons text-[24px] mr-2 text-accent">traffic</span>
                实时交通信息
            </h2>
            <div class="space-y-4">
                <div class="flex items-center">
                    <span class="material-icons text-[20px] mr-2 text-green-500">check_circle</span>
                    <p class="text-[20px]" id="trafficStatus">当前路线交通状况良好，无拥堵</p>
                </div>
                <div class="flex items-center">
                    <span class="material-icons text-[20px] mr-2 text-blue-500">info</span>
                    <p class="text-[20px]" id="travelTip">建议提前15分钟出发，避开晚高峰</p>
                </div>
            </div>
        </div>

        <!-- 目的地信息 -->
        <div class="bg-white rounded-xl shadow-lg p-6 slide-up" style="animation-delay: 0.7s">
            <h2 class="text-[24px] font-bold mb-4 flex items-center">
                <span class="material-icons text-[24px] mr-2 text-accent">info</span>
                目的地信息
            </h2>
            <div class="space-y-4">
                <div class="flex items-center">
                    <span class="material-icons text-[20px] mr-2 text-blue-500">schedule</span>
                    <p class="text-[20px]" id="openingHours">广州塔开放时间：09:30-22:30</p>
                </div>
                <div class="flex items-center">
                    <span class="material-icons text-[20px] mr-2 text-amber-500">warning</span>
                    <p class="text-[20px]" id="notice">今日无临时管制，可正常前往</p>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-6 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-[18px]">长辈出行助手 © 2025</p>
            <p class="text-[16px] text-white/70 mt-2">祝您出行顺利，一路平安！</p>
        </div>
    </footer>
    
    <!-- 底部触发区域 - 用于视觉提示 -->
    <div id="scrollTrigger" class="h-32 bg-gradient-to-t from-light to-transparent flex items-center justify-center">
        <p class="text-primary text-xl font-medium flex items-center animate-bounce">
            <span class="material-icons mr-2">arrow_downward</span>
            继续滚动查看更多
        </p>
    </div>
    </div>

    <!-- 第二页面内容 - 直接嵌入在滚动容器中 -->
    <div id="secondPage" class="relative z-0 min-h-screen bg-cover bg-center" style="background-image: url('zhu.jpg');">
        <!-- 顶部导航栏 -->
        <div class="h-[2px] w-full bg-[#2D2D2D]"></div>
        
        <!-- 页面内容 -->
        <div class="min-h-screen flex flex-col">
            <!-- 主要内容区域 -->
            <div class="flex-grow flex flex-col items-center justify-center p-8">
            <!-- 长辈出行助手Logo和标语 -->
            <div class="text-center max-w-4xl mb-16">
                <h2 class="text-[36px] md:text-[48px] font-bold mb-6 text-white">出行助手</h2>
                <p class="text-[20px] text-[#AAAAAA]">为您的每一次出行保驾护航</p>
            </div>
            
            <!-- 功能特点卡片 - 水平滑动样式 -->
            <div class="relative w-full max-w-6xl mx-auto my-12 overflow-hidden">
                <!-- 标题 -->
                <div class="text-center mb-8">
                    <h2 class="text-[32px] font-bold text-white">我们的核心功能</h2>
                    <p class="text-[18px] text-[#AAAAAA] mt-2">为您提供全方位的出行支持</p>
                </div>
                
                <!-- 水平滑动容器 -->
                <div id="horizontalScrollContainer" class="relative w-full overflow-x-auto scrollbar-hide">
                    <div id="cardListBox" class="flex transition-transform duration-500 ease-out whitespace-nowrap" style="transform: translate3d(0px, 0px, 0px);">
                        <!-- 智能导航卡片 -->
                        <div id="navigationCard" class="flex-shrink-0 w-[360px] md:w-[400px] bg-[#1E1E1E] p-8 rounded-2xl mx-4 hover:bg-[#2D2D2D] transition-all border border-[#2D2D2D]">
                            <div class="cardNumber">[01]</div>
                            <span class="material-icons text-[64px] mb-6 block text-white/80">map</span>
                            <h3 class="text-[24px] font-bold mb-3 text-white">智能导航</h3>
                            <p class="text-[#AAAAAA] text-[15px]">多种出行方式选择，智能规划最优路线，提供最简单明了的出行指引</p>
                        </div>
                        
                        <!-- 实时交通卡片 -->
                        <div id="trafficCard" class="flex-shrink-0 w-[360px] md:w-[400px] bg-[#1E1E1E] p-8 rounded-2xl mx-4 hover:bg-[#2D2D2D] transition-all border border-[#2D2D2D]">
                            <div class="cardNumber">[02]</div>
                            <span class="material-icons text-[64px] mb-6 block text-white/80">traffic</span>
                            <h3 class="text-[24px] font-bold mb-3 text-white">实时交通</h3>
                            <p class="text-[#AAAAAA] text-[15px]">实时路况信息，避开拥堵路段，让出行更加顺畅无忧</p>
                        </div>
                        
                        <!-- 出行信息卡片 -->
                        <div id="infoCard" class="flex-shrink-0 w-[360px] md:w-[400px] bg-[#1E1E1E] p-8 rounded-2xl mx-4 hover:bg-[#2D2D2D] transition-all border border-[#2D2D2D]">
                            <div class="cardNumber">[03]</div>
                            <span class="material-icons text-[64px] mb-6 block text-white/80">info</span>
                            <h3 class="text-[24px] font-bold mb-3 text-white">出行信息</h3>
                            <p class="text-[#AAAAAA] text-[15px]">目的地开放时间、停车场等实用信息，让出行更加便捷安心</p>
                        </div>
                    </div>
                </div>
                
                <!-- 滑动指示器 -->
                <div class="flex justify-center mt-8 space-x-2">
                    <div class="w-3 h-3 rounded-full bg-white opacity-100" id="indicator-0"></div>
                    <div class="w-3 h-3 rounded-full bg-white opacity-50" id="indicator-1"></div>
                    <div class="w-3 h-3 rounded-full bg-white opacity-50" id="indicator-2"></div>
                </div>
            </div>
            
            <!-- 服务特点 -->
            <div class="max-w-6xl mx-auto mt-16">
                <h3 class="text-[28px] font-bold mb-10 text-white text-center">为什么选择我们</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="flex flex-col items-center p-6 bg-[#1E1E1E] rounded-xl border border-[#2D2D2D] hover:shadow-lg hover:shadow-primary/20 transition-all">
                        <span class="material-icons text-[48px] mb-4 text-white/80">calendar_today</span>
                        <h4 class="text-[20px] font-bold mb-3 text-white">智能行程规划</h4>
                        <p class="text-center text-[#AAAAAA]">根据您的习惯和需求，智能定制最佳出行方案，避开复杂路线和高峰期</p>
                    </div>
                    
                    <div class="flex flex-col items-center p-6 bg-[#1E1E1E] rounded-xl border border-[#2D2D2D] hover:shadow-lg hover:shadow-primary/20 transition-all">
                        <span class="material-icons text-[48px] mb-4 text-white/80">access_time</span>
                        <h4 class="text-[20px] font-bold mb-3 text-white">贴心实时提醒</h4>
                        <p class="text-center text-[#AAAAAA]">及时获取交通变化和时间提醒，确保您按时到达目的地，安全无忧</p>
                    </div>
                    
                    <div class="flex flex-col items-center p-6 bg-[#1E1E1E] rounded-xl border border-[#2D2D2D] hover:shadow-lg hover:shadow-primary/20 transition-all">
                        <span class="material-icons text-[48px] mb-4 text-white/80">local_activity</span>
                        <h4 class="text-[20px] font-bold mb-3 text-white">精选景点推荐</h4>
                        <p class="text-center text-[#AAAAAA]">为您精心挑选适合游览的景点，提供无障碍设施信息，让出行更加丰富</p>
                    </div>
                    
                    <div class="flex flex-col items-center p-6 bg-[#1E1E1E] rounded-xl border border-[#2D2D2D] hover:shadow-lg hover:shadow-primary/20 transition-all">
                        <span class="material-icons text-[48px] mb-4 text-white/80">help_outline</span>
                        <h4 class="text-[20px] font-bold mb-3 text-white">全天候客服支持</h4>
                        <p class="text-center text-[#AAAAAA]">专业客服团队24小时在线，随时为您解答出行中的问题，提供及时帮助</p>
                    </div>
                </div>
            </div>
            
            <!-- 用户评价 -->
            <div class="max-w-3xl mx-auto mt-16">
                <h3 class="text-[24px] font-bold mb-6 text-white text-center">用户评价</h3>
                <div class="bg-[#1E1E1E] p-6 rounded-xl border border-[#2D2D2D]">
                    <div class="flex items-center space-x-2 mb-4">
                        <span class="text-yellow-400">★</span>
                        <span class="text-yellow-400">★</span>
                        <span class="text-yellow-400">★</span>
                        <span class="text-yellow-400">★</span>
                        <span class="text-yellow-400">★</span>
                    </div>
                    <p class="text-[#AAAAAA] italic mb-4">"非常好用的出行助手，为我父母的出行提供了很大帮助，界面简洁，操作方便，强烈推荐！"</p>
                    <p class="text-white font-medium">— 张先生</p>
                </div>
            </div>
        </div>
        
        <!-- 返回主页面按钮 -->
        <div class="flex justify-center pb-16">
            <button id="backToMainBtn" class="bg-[#2D2D2D] text-white px-8 py-3 rounded-full text-[18px] font-bold hover:bg-[#3D3D3D] transition-all border border-[#3D3D3D]">
                返回主页面
            </button>
        </div>
    </div>
        
        <!-- 返回主页面按钮 -->
        <div class="flex justify-center pb-16">
            <button id="backToMainBtn" class="bg-[#2D2D2D] text-white px-8 py-3 rounded-full text-[18px] font-bold hover:bg-[#3D3D3D] transition-all border border-[#3D3D3D]">
                返回主页面顶部
            </button>
        </div>
        
        <!-- 底部固定返回顶部按钮 -->
        <button id="scrollToTopBtn" class="fixed bottom-8 right-8 bg-[#2D2D2D] text-white w-12 h-12 rounded-full flex items-center justify-center opacity-70 hover:opacity-100 transition-all border border-[#3D3D3D]">
            <span class="material-icons">arrow_upward</span>
        </button>
    </div>

    <!-- JavaScript -->
    <script>
        // 等待DOM加载完成
        document.addEventListener('DOMContentLoaded', function() {
            // 获取元素
            const taxiLinkElement = document.getElementById('taxiLink');
            const busLinkElement = document.getElementById('busLink');
            const driveLinkElement = document.getElementById('driveLink'); // 新增自驾选项
            const startAddressElement = document.getElementById('startAddress');
            const endAddressElement = document.getElementById('endAddress');
            
            // 默认起点和终点信息
            const defaultStartAddress = '广州市越秀区彩虹桥';
            const defaultEndAddress = '广州塔（小蛮腰）';
            
            // 默认坐标
            const startLat = 23.1265;
            const startLng = 113.2578;
            const endLat = 23.1141;
            const endLng = 113.3255;
            
            // 高德地图Web服务API Key (请替换为您的实际Key)
            const apiKey = 'd9a9c893a2c07f7e6c00a149545363d8';
            
            // 检测是否为移动设备
            function isMobileDevice() {
                return (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
            }
            
            // 生成适合当前设备的链接
            function generateLinkForDevice() {
                if (isMobileDevice()) {
                    // 移动设备：使用amapuri协议，直接打开高德地图APP
                    return {
                        taxiLink: `amapuri://openFeature?featureName=taxi&sourceApplication=长辈出行助手&startLat=${startLat}&startLon=${startLng}&startName=${encodeURIComponent(defaultStartAddress)}&destLat=${endLat}&destLon=${endLng}&destName=${encodeURIComponent(defaultEndAddress)}`,
                        busLink: `amapuri://route/plan?sourceApplication=长辈出行助手&slat=${startLat}&slon=${startLng}&sname=${encodeURIComponent(defaultStartAddress)}&dlat=${endLat}&dlon=${endLng}&dname=${encodeURIComponent(defaultEndAddress)}&dev=0&t=1`,
                        driveLink: `amapuri://route/plan?sourceApplication=长辈出行助手&slat=${startLat}&slon=${startLng}&sname=${encodeURIComponent(defaultStartAddress)}&dlat=${endLat}&dlon=${endLng}&dname=${encodeURIComponent(defaultEndAddress)}&dev=0&t=0` // t=0表示驾车
                    };
                } else {
                    // 非移动设备：使用更可靠的高德地图Web版本链接格式
                    return {
                        // 使用高德地图Web服务API - 驾车导航专用格式
                        // 修正参数名称以符合高德Web服务API规范
                        // 使用高德地图网页版导航端点，支持地址自动填充
                        taxiLink: `https://ditu.amap.com/navigation?from=${encodeURIComponent(defaultStartAddress)}&fromcoord=${startLng},${startLat}&to=${encodeURIComponent(defaultEndAddress)}&tocoord=${endLng},${endLat}&mode=taxi&key=${apiKey}`,
                        busLink: `https://ditu.amap.com/navigation?from=${encodeURIComponent(defaultStartAddress)}&fromcoord=${startLng},${startLat}&to=${encodeURIComponent(defaultEndAddress)}&tocoord=${endLng},${endLat}&mode=bus&key=${apiKey}`,
                        driveLink: `https://ditu.amap.com/navigation?from=${encodeURIComponent(defaultStartAddress)}&fromcoord=${startLng},${startLat}&to=${encodeURIComponent(defaultEndAddress)}&tocoord=${endLng},${endLat}&mode=car&key=${apiKey}`
                    };
                }
            }
            
            // 获取适合当前设备的链接
            const links = generateLinkForDevice();
            
            // 整合用户位置检测的高德地图打开函数
            function openGaodeMap(mode) {
                // 从Address.md获取的固定坐标
                const startLat = 23.1265;
                const startLng = 113.2578;
                const endLat = 23.1141;
                const endLng = 113.3255;
                const startName = encodeURIComponent(defaultStartAddress);
                const endName = encodeURIComponent(defaultEndAddress);
                
                // 尝试获取用户当前位置
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        // 位置获取成功回调
                        function(position) {
                            const usrLat = position.coords.latitude;
                            const usrLon = position.coords.longitude;
                            
                            // 导航模式 - 使用用户实时位置作为起点
                            const navUrl = `https://uri.amap.com/navigation?from=${usrLon},${usrLat},我的位置&to=${endLng},${endLat},${endName}&mode=${mode === 'taxi' ? 'taxi' : mode === 'bus' ? 'bus' : 'driving'}&policy=0&src=mypage&coordinate=gaode`;
                            window.location.href = navUrl;
                        },
                        // 位置获取失败回调 - 使用固定起点
                        function(error) {
                            console.log('无法获取位置，使用默认起点:', error.message);
                            const markerUrl = `https://uri.amap.com/marker?position=${endLng},${endLat}&name=${endName}&src=mypage&coordinate=gaode`;
                            window.location.href = markerUrl;
                        },
                        // 位置获取选项
                        { timeout: 5000, enableHighAccuracy: false }
                    );
                } else {
                    // 浏览器不支持Geolocation - 使用固定起点
                    const markerUrl = `https://uri.amap.com/marker?position=${endLng},${endLat}&name=${endName}&src=mypage&coordinate=gaode`;
                    window.location.href = markerUrl;
                }
            }
            
            // 添加点击事件处理
            taxiLinkElement.addEventListener('click', function(e) {
                e.preventDefault();
                openGaodeMap('taxi');
            });
            
            busLinkElement.addEventListener('click', function(e) {
                e.preventDefault();
                openGaodeMap('bus');
            });
            
            if (driveLinkElement) {
                driveLinkElement.addEventListener('click', function(e) {
                    e.preventDefault();
                    openGaodeMap('drive');
                });
            }
            
            // 添加平滑滚动效果
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
            
            // 获取页面元素
            const singleScrollContainer = document.getElementById('singleScrollContainer');
            const mainPage = document.getElementById('mainPage');
            const secondPage = document.getElementById('secondPage');
            const backToMainBtn = document.getElementById('backToMainBtn');
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');
            
            // 获取主页面和第二页面的位置信息
            let mainPageHeight = 0;
            let secondPageTop = 0;
            
            // 计算页面位置
            function calculatePagePositions() {
                mainPageHeight = mainPage.offsetHeight;
                secondPageTop = mainPageHeight;
            }
            
            // 初始化计算
            calculatePagePositions();
            
            // 窗口大小改变时重新计算
            window.addEventListener('resize', calculatePagePositions);
            
            // 滚动事件处理
            let lastScrollPosition = 0;
            let isScrollingUp = false;
            
            // 添加平滑滚动效果
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
            
            // 返回主页面顶部按钮点击事件
            backToMainBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // 返回顶部按钮点击事件
            scrollToTopBtn.addEventListener('click', function() {
                // 计算第二页面的顶部位置
                const secondPagePosition = mainPage.offsetHeight;
                
                // 滚动到第二页面顶部
                window.scrollTo({
                    top: secondPagePosition,
                    behavior: 'smooth'
                });
            });
            
            // 获取功能卡片元素 - 改进版本
            let navCard, trafficCard, infoCard;
            
            // 先尝试通过标题内容查找卡片
            function findCardsByContent() {
                // 使用属性选择器查找包含特定文本的h3元素的父元素
                const titles = secondPage.querySelectorAll('h3');
                
                titles.forEach(title => {
                    const text = title.textContent.trim();
                    if (text.includes('智能导航')) {
                        // 获取父元素卡片
                        navCard = title.closest('div');
                    } else if (text.includes('实时交通')) {
                        trafficCard = title.closest('div');
                    } else if (text.includes('出行信息')) {
                        infoCard = title.closest('div');
                    }
                });
            }
            
            // 查找卡片
            findCardsByContent();
            
            // 如果找不到，尝试通过图标查找
            if (!navCard || !trafficCard || !infoCard) {
                const icons = secondPage.querySelectorAll('.material-icons');
                
                icons.forEach(icon => {
                    const iconName = icon.textContent.trim();
                    if (iconName === 'map' && !navCard) {
                        // 获取父元素卡片
                        navCard = icon.closest('div');
                    } else if (iconName === 'traffic' && !trafficCard) {
                        trafficCard = icon.closest('div');
                    } else if (iconName === 'info' && !infoCard) {
                        infoCard = icon.closest('div');
                    }
                });
            }
            
            // 如果还是找不到，尝试通过网格容器查找
            if (!navCard || !trafficCard || !infoCard) {
                // 查找包含卡片的网格容器
                const gridContainers = secondPage.querySelectorAll('.grid');
                
                gridContainers.forEach(container => {
                    const cards = container.querySelectorAll('div');
                    if (cards.length >= 3) {
                        // 假设前三个是功能卡片
                        if (!navCard) navCard = cards[0];
                        if (!trafficCard) trafficCard = cards[1];
                        if (!infoCard) infoCard = cards[2];
                    }
                });
            }
            
            // 添加唯一标识，便于调试
            if (navCard) navCard.id = 'navigationCard';
            if (trafficCard) trafficCard.id = 'trafficCard';
            if (infoCard) infoCard.id = 'infoCard';
            
            // 为卡片添加基础样式，确保可以水平移动
            function setupCardStyles(card) {
                if (card) {
                    card.style.transition = 'transform 0.3s ease-out';
                    card.style.position = 'relative';
                    // 初始位置从右侧进入
                    card.style.transform = 'translateX(200px)';
                }
            }
            
            // 为所有卡片设置样式
            setupCardStyles(navCard);
            setupCardStyles(trafficCard);
            setupCardStyles(infoCard);
            
            // 定义卡片移动参数
            const maxCardMove = 300; // 增加最大移动距离，使其更明显
            const scrollInfluence = 500; // 增加影响范围
            
            // 滚动监听 - 实现卡片水平移动效果
            window.addEventListener('scroll', function() {
                const currentScrollPosition = window.pageYOffset || document.documentElement.scrollTop;
                
                // 检测滚动方向
                isScrollingUp = currentScrollPosition < lastScrollPosition;
                lastScrollPosition = currentScrollPosition;
                
                // 检查是否在第二页面区域内
                const secondPagePosition = mainPage.offsetHeight;
                const secondPageBottom = secondPagePosition + secondPage.offsetHeight;
                
                // 如果当前滚动位置在第二页面范围内
                if (currentScrollPosition >= secondPagePosition - 200 && currentScrollPosition <= secondPageBottom) {
                    // 计算相对于第二页面顶部的滚动位置（提前200px开始动画）
                    const relativeScroll = currentScrollPosition - (secondPagePosition - 200);
                    
                    // 计算滚动进度（基于影响范围）
                    const scrollProgress = Math.min(relativeScroll / scrollInfluence, 1);
                    
                    // 根据滚动方向和进度计算卡片移动距离
                    let navMove, trafficMove, infoMove;
                    
                    if (isScrollingUp) {
                        // 向上滚动时，卡片从左侧向右侧移动（返回）
                        navMove = 200 - scrollProgress * maxCardMove;
                        trafficMove = 180 - scrollProgress * maxCardMove * 0.9;
                        infoMove = 160 - scrollProgress * maxCardMove * 0.8;
                    } else {
                        // 向下滚动时，卡片从右侧向左侧移动（进入）
                        navMove = 200 - scrollProgress * maxCardMove;
                        trafficMove = 180 - scrollProgress * maxCardMove * 0.9;
                        infoMove = 160 - scrollProgress * maxCardMove * 0.8;
                    }
                    
                    // 应用transform样式
                    if (navCard) navCard.style.transform = `translateX(${navMove}px)`;
                    if (trafficCard) trafficCard.style.transform = `translateX(${trafficMove}px)`;
                    if (infoCard) infoCard.style.transform = `translateX(${infoMove}px)`;
                } else if (currentScrollPosition < secondPagePosition - 200) {
                    // 滚动到第二页面上方较远位置，卡片回到右侧
                    if (navCard) navCard.style.transform = 'translateX(200px)';
                    if (trafficCard) trafficCard.style.transform = 'translateX(180px)';
                    if (infoCard) infoCard.style.transform = 'translateX(160px)';
                } else if (currentScrollPosition > secondPagePosition) {
                    // 滚动到第二页面内，卡片完全进入
                    if (navCard) navCard.style.transform = 'translateX(0px)';
                    if (trafficCard) trafficCard.style.transform = 'translateX(0px)';
                    if (infoCard) infoCard.style.transform = 'translateX(0px)';
                }
            });
            
            // 初始化水平滑动卡片功能
            function initHorizontalScrollCards() {
                const horizontalScrollContainer = document.getElementById('horizontalScrollContainer');
                const cardListBox = document.getElementById('cardListBox');
                const indicators = [
                    document.getElementById('indicator-0'),
                    document.getElementById('indicator-1'),
                    document.getElementById('indicator-2')
                ];
                
                if (!horizontalScrollContainer || !cardListBox || !indicators[0]) {
                    return;
                }
                
                let currentIndex = 0;
                const cardWidth = 400; // 卡片宽度（包括边距）
                const cardsCount = 3;
                let startX = 0;
                let moveX = 0;
                let currentX = 0;
                let isDragging = false;
                
                // 更新指示器状态
                function updateIndicators(index) {
                    indicators.forEach((indicator, i) => {
                        indicator.style.opacity = i === index ? '1' : '0.5';
                    });
                }
                
                // 滚动到指定卡片
                function scrollToCard(index) {
                    currentIndex = Math.max(0, Math.min(index, cardsCount - 1));
                    const offset = -currentIndex * (cardWidth + 16); // 16px 是左右边距之和
                    cardListBox.style.transform = `translate3d(${offset}px, 0px, 0px)`;
                    updateIndicators(currentIndex);
                }
                
                // 点击指示器切换卡片
                indicators.forEach((indicator, index) => {
                    indicator.addEventListener('click', () => {
                        scrollToCard(index);
                    });
                });
                
                // 鼠标拖动事件
                horizontalScrollContainer.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    startX = e.clientX - currentX;
                    horizontalScrollContainer.style.cursor = 'grabbing';
                });
                
                window.addEventListener('mousemove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    moveX = e.clientX - startX;
                    
                    // 限制拖动范围
                    const maxMove = 0;
                    const minMove = -(cardsCount - 1) * (cardWidth + 16);
                    moveX = Math.max(minMove, Math.min(maxMove, moveX));
                    
                    cardListBox.style.transform = `translate3d(${moveX}px, 0px, 0px)`;
                    currentX = moveX;
                });
                
                window.addEventListener('mouseup', () => {
                    if (!isDragging) return;
                    isDragging = false;
                    horizontalScrollContainer.style.cursor = 'grab';
                    
                    // 根据拖动距离自动吸附到最近的卡片
                    const cardIndex = Math.round(-currentX / (cardWidth + 16));
                    scrollToCard(cardIndex);
                });
                
                // 触摸事件支持
                horizontalScrollContainer.addEventListener('touchstart', (e) => {
                    isDragging = true;
                    startX = e.touches[0].clientX - currentX;
                });
                
                horizontalScrollContainer.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    moveX = e.touches[0].clientX - startX;
                    
                    // 限制拖动范围
                    const maxMove = 0;
                    const minMove = -(cardsCount - 1) * (cardWidth + 16);
                    moveX = Math.max(minMove, Math.min(maxMove, moveX));
                    
                    cardListBox.style.transform = `translate3d(${moveX}px, 0px, 0px)`;
                    currentX = moveX;
                });
                
                horizontalScrollContainer.addEventListener('touchend', () => {
                    if (!isDragging) return;
                    isDragging = false;
                    
                    // 根据拖动距离自动吸附到最近的卡片
                    const cardIndex = Math.round(-currentX / (cardWidth + 16));
                    scrollToCard(cardIndex);
                });
                
                // 设置初始样式
                horizontalScrollContainer.style.cursor = 'grab';
                
                // 响应窗口大小变化
                window.addEventListener('resize', () => {
                    // 重新计算卡片宽度
                    const newCardWidth = window.innerWidth < 768 ? 360 : 400;
                    if (newCardWidth !== cardWidth) {
                        scrollToCard(currentIndex);
                    }
                });
            }
            
            // 初始化水平滑动卡片
            initHorizontalScrollCards();
        });
    </script>
</body>
</html>
